create table departamento (
	id_departamento int primary key identity(1,1),
	nombre nvarchar(50) not null
);

create table provincia (
	id_provincia int primary key identity(1,1),
	nombre nvarchar(50) not null,
	id_departamento int not null,
	foreign key (id_departamento) references departamento(id_departamento)
);

create table distrito (
	id_distrito int primary key identity(1,1),
	nombre nvarchar(50) not null,
	id_provincia int not null,
	foreign key (id_provincia) references provincia(id_provincia)
);

create table sede (
	id_sede int primary key identity(1,1),
	nombre nvarchar(100) not null,
	direccion nvarchar(200) not null,
	id_distrito int not null,
	foreign key (id_distrito) references distrito(id_distrito)
);

create table campus (
	id_campus int primary key identity(1,1),
	nombre nvarchar(100) not null,
	id_sede int not null,
	foreign key (id_sede) references sede(id_sede)
);

create table facultad (
	id_facultad int primary key identity(1,1),
	nombre nvarchar(100) not null
);

create table carrera (
	id_carrera int primary key identity(1,1),
	nombre nvarchar(100) not null,
	id_facultad int not null,
	foreign key (id_facultad) references facultad(id_facultad)
);

create table semestre (
	id_semestre int primary key identity(1,1),
	denominacion nvarchar(50) not null,
	fecha_inicio date not null,
	fecha_fin date not null
);

create table alumno (
	id_alumno int primary key identity(1,1),
	nombre nvarchar(50) not null,
	apellido nvarchar(50) not null,
	dni char(8) not null,
	correo nvarchar(50) null,
	telefono nvarchar(9) null,
	id_distrito int not null,
	id_carrera int not null,  -- Añadir columna id_carrera
	id_campus int not null,   -- Añadir columna id_campus
	foreign key (id_distrito) references distrito(id_distrito),
	foreign key (id_carrera) references carrera(id_carrera),
	foreign key (id_campus) references campus(id_campus)
);

create table matricula (
	id_matricula int primary key identity(1,1),
	fecha_matricula date not null,
	vigencia char(1) not null,
	id_semestre int,
	id_distrito int not null,
	id_carrera int not null,
	id_campus int not null,
	foreign key (id_semestre) references semestre(id_semestre),
	foreign key (id_distrito) references distrito(id_distrito),
	foreign key (id_carrera) references carrera(id_carrera),
	foreign key (id_campus) references campus(id_campus),
	foreign key (id_matricula) references alumno(id_alumno)
);

create table grupo (
	id_grupo int primary key identity(1,1),
	denominacion nvarchar(50),
	matriculados int not null
);

create table detalle_matricula (
	matricula_id int not null,
	grupo_id int not null,
	nota int null,
	primary key(matricula_id, grupo_id),
	foreign key (grupo_id) references grupo(id_grupo),
	foreign key (matricula_id) references matricula(id_matricula)
);

create table curso (
	id_curso int primary key identity(1,1),
	nombre nvarchar(50) not null,
	descripcion nvarchar(100) null
);

create table detalle_grupo_curso (
	id_grupo int not null,
	id_curso int not null,
	primary key (id_grupo, id_curso),
	foreign key (id_grupo) references grupo(id_grupo),
	foreign key (id_curso) references curso(id_curso)
);

create table docente (
	id_docente int primary key identity(1,1),
	nombre nvarchar(50) not null,
	apellido nvarchar(50) not null,
	dni char(8) not null,
	correo nvarchar(50) null,
	telefono nvarchar(9) null
);

create table detalle_docente_curso (
	id_docente int not null,
	id_curso int not null,
	primary key(id_docente, id_curso),
	foreign key (id_docente) references docente(id_docente),
	foreign key (id_curso) references curso(id_curso)
);
